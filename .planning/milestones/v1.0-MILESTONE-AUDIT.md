---
milestone: v1.0
audited: 2026-02-10T16:00:00Z
status: gaps_found
scores:
  requirements: 47/49
  phases: 7/7
  integration: 6/8
  flows: 7/8
gaps:
  requirements:
    - "PRIV-03: Privacy Manifest exists but untested against App Store validation"
    - "PRIV-06: Camera permission strings exist but not verified on device"
  integration:
    - "CRITICAL: API path double-prefix bug in 6 mobile service files — circles, invites, fusion, artworkConsent, exports, styles all prepend /api/v1/ but API_BASE_URL already includes /api/v1, causing 404s"
    - "Save to Device placeholder in ProcessingResultScreen (non-blocking)"
  flows:
    - "Circle Social Flow partially broken: circles, invites, fusion, consent API calls will 404 due to double-prefix"
tech_debt:
  - phase: 03-ai-processing-pipeline
    items:
      - "Save to Device shows placeholder alert instead of saving (ProcessingResultScreen.tsx lines 66-71)"
      - "AI model accuracy (AIPL-01/02/03) uses dev-mode fallbacks — needs real model weights for production"
  - phase: 04-camera-guidance-and-artistic-styles
    items:
      - "Burst capture selects middle frame (MVP) instead of sharpest"
      - "ONNX model paths are placeholders — OpenCV fallback ensures functionality"
      - "CameraRoll.save placeholder in StylePreviewScreen"
  - phase: 05-social-features-circles-and-fusion
    items:
      - "FusionResultScreen shows numbered boxes instead of source artwork thumbnails"
      - "FusionResultScreen Save to Gallery shows alert placeholder"
      - "SharedGalleryScreen artwork detail tap shows 'coming soon' alert"
  - phase: 06-payments-and-freemium
    items:
      - "RevenueCat API keys are empty strings (need production keys)"
      - "Sentry DSN placeholder in mobile/index.js"
  - phase: 07-polish-and-production-readiness
    items:
      - "Test coverage at 30% threshold (7 smoke tests)"
      - "All human verification items pending (live services, CI, production deploy, Sentry, APK signing, App Store)"
---

# v1.0 Milestone Audit Report

**Milestone:** v1.0 MVP
**Audited:** 2026-02-10
**Status:** gaps_found

## Summary

All 7 phases completed with 22/22 plans executed. Phase-level verification passed for all phases. However, **cross-phase integration check found 1 critical bug** that would break 6 mobile service files affecting circles, fusion, consent, invites, exports, and styles features.

## Phase Verification Aggregation

| Phase | Status | Score | Critical Gaps | Tech Debt Items |
|-------|--------|-------|---------------|-----------------|
| 1. Foundation & Privacy | passed | 22/22 | 0 | 1 (OAuth CLIENT_ID optional) |
| 2. Camera Capture & Upload | passed | 4/4 | 0 | 0 |
| 3. AI Processing Pipeline | human_needed | 7/7 | 0 | 2 (Save to Device, model accuracy) |
| 4. Camera Guidance & Styles | passed | 13/13 | 0 | 3 (burst selection, ONNX paths, CameraRoll) |
| 5. Social Features | passed | 5/5 | 0 | 3 (thumbnails, save, detail view) |
| 6. Payments & Freemium | passed | 11/11 | 0 | 1 (RevenueCat keys) |
| 7. Polish & Production | human_needed | 11/11 | 0 | 2 (coverage, human verification) |

**Total Phase Score:** 73/73 truths verified (100%)

## Critical Integration Issue

### API Path Double-Prefix Bug

**Severity:** CRITICAL — breaks 6 out of 8 mobile service files at runtime

**Root Cause:** `API_BASE_URL` in `mobile/src/utils/constants.ts` already includes `/api/v1`:
```
http://...:8000/api/v1  (dev)
https://api.irisart.app/api/v1  (prod)
```

But 6 service files prepend `/api/v1/` again in their API paths, resulting in double-prefix URLs like `/api/v1/api/v1/circles` → 404 errors.

**Affected Files:**

| File | Example Call | Resulting URL |
|------|-------------|---------------|
| `mobile/src/services/circles.ts` | `apiClient.get('/api/v1/circles')` | `/api/v1/api/v1/circles` — 404 |
| `mobile/src/services/invites.ts` | `apiClient.post('/api/v1/circles/{id}/invite')` | `/api/v1/api/v1/circles/{id}/invite` — 404 |
| `mobile/src/services/fusion.ts` | `apiClient.post('/api/v1/fusion')` | `/api/v1/api/v1/fusion` — 404 |
| `mobile/src/services/artworkConsent.ts` | `apiClient.post('/api/v1/consent/request')` | `/api/v1/api/v1/consent/request` — 404 |
| `mobile/src/services/exports.ts` | `apiClient.post('/api/v1/exports/hd')` | `/api/v1/api/v1/exports/hd` — 404 |
| `mobile/src/services/styles.ts` | `apiClient.get('/api/v1/styles/presets')` | `/api/v1/api/v1/styles/presets` — 404 |

**Correct Files (no double-prefix):**

| File | Example Call | Status |
|------|-------------|--------|
| `mobile/src/services/auth.ts` | `apiClient.post('/auth/logout')` | Correct |
| `mobile/src/services/consent.ts` | `apiClient.post('/privacy/consent')` | Correct |
| `mobile/src/services/upload.ts` | `apiClient.post('/photos/{id}/confirm')` | Correct |
| `mobile/src/services/processing.ts` | `api.post('/processing/submit')` | Correct |
| `mobile/src/services/purchases.ts` | `apiClient.post('/purchases/hd-export')` | Correct |

**Fix:** Remove `/api/v1` prefix from all API paths in the 6 affected service files.

**Impact:** This would break:
- All circles features (create, list, detail, leave, remove member)
- All invite features (generate, info, accept)
- All fusion/composition features
- All artwork consent features
- HD export requests
- Style preset listing and application
- AI art generation (via exports.ts)

**Features still working:** Auth, privacy/consent, photo upload, processing, purchases

## Requirements Coverage

### Satisfied (47/49)

All v1 requirements have code implementations. 47 requirements are fully satisfied by phase verifications.

### Partial/Needs Verification (2/49)

| Requirement | Phase | Issue |
|-------------|-------|-------|
| PRIV-03: Privacy Manifest for iOS | Phase 7 | PrivacyInfo.xcprivacy exists with 4 data types declared, but requires App Store Connect validation (human needed) |
| PRIV-06: Camera permission strings | Phase 2 | Permission strings exist in code, but not verified on actual device permission dialogs (human needed) |

Note: These are "human_needed" items — code is complete, just needs device/service validation.

### Requirements by Category

| Category | Count | Satisfied | Partial |
|----------|-------|-----------|---------|
| AUTH (01-07) | 7 | 7 | 0 |
| PRIV (01-06) | 6 | 4 | 2 |
| CAPT (01-06) | 6 | 6 | 0 |
| AIPL (01-06) | 6 | 6 | 0 |
| STYL (01-06) | 6 | 6 | 0 |
| SOCL (01-07) | 7 | 7 | 0 |
| PAYS (01-05) | 5 | 5 | 0 |
| INFR (01-06) | 6 | 6 | 0 |

## E2E Flow Verification

| Flow | Status | Notes |
|------|--------|-------|
| 1. New User Onboarding → First Capture | ✓ PASS | Register → consent → camera → capture → upload → gallery |
| 2. Capture → AI Processing → Result | ✓ PASS | Photo → processing → WebSocket progress → before/after |
| 3. Processing → Style Application | ⚠ BROKEN | styles.ts uses double-prefix `/api/v1/styles/presets` |
| 4. Processing → AI Generation | ⚠ BROKEN | exports.ts references `/api/v1/styles/generate` with double prefix |
| 5. HD Export Purchase | ⚠ BROKEN | exports.ts uses double-prefix `/api/v1/exports/hd` |
| 6. Circle Social Flow | ⚠ BROKEN | circles.ts, invites.ts, fusion.ts all use double-prefix |
| 7. Rate Limiting Flow | ✓ PASS | Rate limit service and banner work correctly |
| 8. Account Lifecycle | ✓ PASS | Register → use → data export → delete |

**Note:** Flows 3-6 are broken due to the single API path double-prefix bug. Fixing the paths in the 6 service files resolves all broken flows simultaneously.

## Tech Debt Summary

### By Category

| Category | Count | Details |
|----------|-------|---------|
| UI Placeholders | 4 | Save to Device (x2), artwork thumbnails, detail view |
| Dev-Mode Fallbacks | 3 | AI models, ONNX paths, burst frame selection |
| Production Setup | 3 | RevenueCat keys, Sentry DSN, test coverage |
| Human Verification | 6+ | Live service testing, CI, production deploy, APK signing, App Store |

### Total: 16 tech debt items across 5 phases

All are non-blocking and documented in phase verifications. Most are expected for an MVP (dev-mode fallbacks, placeholder keys, etc.).

## Recommendation

**Status: gaps_found** — 1 critical integration bug must be fixed before milestone completion.

**Required fix:** Remove `/api/v1` prefix from API paths in 6 mobile service files:
- `mobile/src/services/circles.ts`
- `mobile/src/services/invites.ts`
- `mobile/src/services/fusion.ts`
- `mobile/src/services/artworkConsent.ts`
- `mobile/src/services/exports.ts`
- `mobile/src/services/styles.ts`

This is a ~15-minute fix that resolves all broken E2E flows.

---

_Audited: 2026-02-10_
_Auditor: Claude (gsd-milestone-audit)_
